<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategiespiel - Spielfeld</title>
    
    <!-- CSS Styles -->
    <link rel="stylesheet" href="css/game-styles.css">
</head>
<body>
    <!-- Race Selection Modal -->
    <div class="race-selection-modal" id="raceSelectionModal">
        <div class="race-selection-content">
            <h2>🏛️ Wähle deine Rasse</h2>
            <div id="raceSelectionStatus" class="info-display" style="text-align: center; margin-bottom: 20px;">
                Wähle eine Rasse aus den verfügbaren Optionen
            </div>
            <div class="races-grid" id="racesGrid">
                <!-- Wird dynamisch gefüllt -->
            </div>
            <div style="text-align: center;">
                <button class="btn btn-success" id="confirmRaceBtn" disabled>✅ Rasse bestätigen</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="map-container">
            <canvas class="map-canvas" id="gameCanvas"></canvas>
            
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomInBtn">+</button>
                <button class="zoom-btn" id="zoomOutBtn">−</button>
                <button class="zoom-btn" id="resetViewBtn" style="font-size: 14px;">⌂</button>
            </div>
            
            <div class="coordinates" id="coordinates">
                X: 0, Y: 0<br>
                Terrain: Unbekannt<br>
                Zoom: 100%
            </div>
            
            <div class="debug-info" id="debugInfo">
                Debug: Initialisierung...
            </div>
        </div>

        <div class="ui-panel">
            <!-- Player Information -->
            <div class="player-info">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div id="playerName">Spieler</div>
                        <div class="gold-display">💰 <span id="goldAmount">100</span></div>
                    </div>
                    <div id="raceDisplay" style="font-size: 2em;">👑</div>
                </div>
                <div class="turn-indicator waiting" id="turnIndicator">
                    <span class="loading-spinner"></span> Warten auf Spiel...
                </div>
                <div class="timer-display" id="timerDisplay" style="display: none;">
                    ⏱️ <span id="timeRemaining">--</span>s
                </div>
            </div>

            <!-- Turn Information -->
            <div class="ui-section" id="turnInfoSection">
                <h3>🎯 Zug-Information</h3>
                <div class="info-display" id="turnInfo">
                    Warten auf Spielstart...
                </div>
                <div class="race-status-panel" id="raceStatusPanel" style="display: none;">
                    <div style="font-weight: bold; margin-bottom: 8px;">Rassen-Status:</div>
                    <div id="raceStatusList">
                        <!-- Wird dynamisch gefüllt -->
                    </div>
                </div>
            </div>

            <!-- Selected Unit Info -->
            <div class="ui-section" id="selectedUnitSection" style="display: none;">
                <h3>🎯 Ausgewählte Einheit</h3>
                <div id="selectedUnitInfo" class="info-display">
                    <!-- Wird dynamisch gefüllt -->
                </div>
                <button class="btn" id="upgradeUnitBtn">⬆️ Aufwerten</button>
                <button class="btn btn-secondary" id="moveUnitBtn">🚶 Bewegen</button>
            </div>

            <!-- Map Information -->
            <div class="ui-section">
                <h3>📊 Karten-Informationen</h3>
                <div class="info-display" id="mapInfo">
                    Lädt Spiel-Informationen...
                </div>
            </div>

            <!-- Units Overview -->
            <div class="ui-section">
                <h3>👥 Meine Einheiten</h3>
                <div class="units-list" id="unitsList">
                    <div class="info-display">Keine Einheiten</div>
                </div>
                <button class="btn btn-success" id="buyUnitsBtn">🛒 Einheiten kaufen</button>
            </div>

            <!-- Game Controls -->
            <div class="ui-section">
                <h3>🎮 Spielsteuerung</h3>
                <p style="font-size: 12px; margin-bottom: 15px; opacity: 0.8;">
                    <strong>Steuerung:</strong><br>
                    • Mausrad = Zoom<br>
                    • Rechtsklick + Ziehen = Pan<br>
                    • WASD/Pfeiltasten = Bewegen<br>
                    • Leertaste = Kamera zentrieren<br>
                    • Linksklick = Einheit auswählen
                </p>
                <button class="btn btn-warning" id="endTurnBtn" disabled>⏭️ Zug beenden</button>
                <button class="btn" id="zoomInBtn2">🔍+ Vergrößern</button>
                <button class="btn" id="zoomOutBtn2">🔍- Verkleinern</button>
                <button class="btn" id="resetViewBtn2">🏠 Kamera zentrieren</button>
                <button class="btn btn-secondary" id="returnLobbyBtn">🚪 Zur Lobby</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- Konfiguration zuerst -->
    <script src="/js/game-config.js"></script>

    <!-- State-Manager, weil ihn viele brauchen -->
    <script src="/js/game-state.js"></script>

    <!-- Ab hier dürfen Module auf GAME_CONFIG & gameState zugreifen -->
    <script src="/js/socket-manager.js"></script>
    <script src="/js/races.js"></script>
    <script src="/js/race-selection.js"></script>
    <script src="/js/map-system.js"></script>
    <script src="/js/game-main.js"></script>

</body>
</html>