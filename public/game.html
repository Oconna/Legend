<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategiespiel - Spielfeld</title>
    
    <!-- CSS Styles -->
    <link rel="stylesheet" href="css/game-styles.css">
</head>
<body>
    <!-- Race Selection Modal -->
    <div class="race-selection-modal" id="raceSelectionModal">
        <div class="race-selection-content">
            <h2>ğŸ›ï¸ WÃ¤hle deine Rasse</h2>
            <div id="raceSelectionStatus" class="info-display" style="text-align: center; margin-bottom: 20px;">
                WÃ¤hle eine Rasse aus den verfÃ¼gbaren Optionen
            </div>
            <div class="races-grid" id="racesGrid">
                <!-- Wird dynamisch gefÃ¼llt -->
            </div>
            <div style="text-align: center;">
                <button class="btn btn-success" id="confirmRaceBtn" disabled>âœ… Rasse bestÃ¤tigen</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="map-container">
            <canvas class="map-canvas" id="gameCanvas"></canvas>
            
            <div class="zoom-controls">
                <button class="zoom-btn" id="zoomInBtn">+</button>
                <button class="zoom-btn" id="zoomOutBtn">âˆ’</button>
                <button class="zoom-btn" id="resetViewBtn" style="font-size: 14px;">âŒ‚</button>
            </div>
            
            <div class="coordinates" id="coordinates">
                X: 0, Y: 0<br>
                Terrain: Unbekannt<br>
                Zoom: 100%
            </div>
            
            <div class="debug-info" id="debugInfo">
                Debug: Initialisierung...
            </div>
        </div>

        <div class="ui-panel">
            <!-- Player Information -->
            <div class="player-info">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div id="playerName">Spieler</div>
                        <div class="gold-display">ğŸ’° <span id="goldAmount">100</span></div>
                    </div>
                    <div id="raceDisplay" style="font-size: 2em;">ğŸ‘‘</div>
                </div>
                <div class="turn-indicator waiting" id="turnIndicator">
                    <span class="loading-spinner"></span> Warten auf Spiel...
                </div>
                <div class="timer-display" id="timerDisplay" style="display: none;">
                    â±ï¸ <span id="timeRemaining">--</span>s
                </div>
            </div>

            <!-- Turn Information -->
            <div class="ui-section" id="turnInfoSection">
                <h3>ğŸ¯ Zug-Information</h3>
                <div class="info-display" id="turnInfo">
                    Warten auf Spielstart...
                </div>
                <div class="race-status-panel" id="raceStatusPanel" style="display: none;">
                    <div style="font-weight: bold; margin-bottom: 8px;">Rassen-Status:</div>
                    <div id="raceStatusList">
                        <!-- Wird dynamisch gefÃ¼llt -->
                    </div>
                </div>
            </div>

            <!-- Selected Unit Info -->
            <div class="ui-section" id="selectedUnitSection" style="display: none;">
                <h3>ğŸ¯ AusgewÃ¤hlte Einheit</h3>
                <div id="selectedUnitInfo" class="info-display">
                    <!-- Wird dynamisch gefÃ¼llt -->
                </div>
                <button class="btn" id="upgradeUnitBtn">â¬†ï¸ Aufwerten</button>
                <button class="btn btn-secondary" id="moveUnitBtn">ğŸš¶ Bewegen</button>
            </div>

            <!-- Map Information -->
            <div class="ui-section">
                <h3>ğŸ“Š Karten-Informationen</h3>
                <div class="info-display" id="mapInfo">
                    LÃ¤dt Spiel-Informationen...
                </div>
            </div>

            <!-- Units Overview -->
            <div class="ui-section">
                <h3>ğŸ‘¥ Meine Einheiten</h3>
                <div class="units-list" id="unitsList">
                    <div class="info-display">Keine Einheiten</div>
                </div>
                <button class="btn btn-success" id="buyUnitsBtn">ğŸ›’ Einheiten kaufen</button>
            </div>

            <!-- Game Controls -->
            <div class="ui-section">
                <h3>ğŸ® Spielsteuerung</h3>
                <p style="font-size: 12px; margin-bottom: 15px; opacity: 0.8;">
                    <strong>Steuerung:</strong><br>
                    â€¢ Mausrad = Zoom<br>
                    â€¢ Rechtsklick + Ziehen = Pan<br>
                    â€¢ WASD/Pfeiltasten = Bewegen<br>
                    â€¢ Leertaste = Kamera zentrieren<br>
                    â€¢ Linksklick = Einheit auswÃ¤hlen
                </p>
                <button class="btn btn-warning" id="endTurnBtn" disabled>â­ï¸ Zug beenden</button>
                <button class="btn" id="zoomInBtn2">ğŸ”+ VergrÃ¶ÃŸern</button>
                <button class="btn" id="zoomOutBtn2">ğŸ”- Verkleinern</button>
                <button class="btn" id="resetViewBtn2">ğŸ  Kamera zentrieren</button>
                <button class="btn btn-secondary" id="returnLobbyBtn">ğŸšª Zur Lobby</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- Konfiguration zuerst -->
    <script src="/js/game-config.js"></script>

    <!-- State-Manager, weil ihn viele brauchen -->
    <script src="/js/game-state.js"></script>

    <!-- Ab hier dÃ¼rfen Module auf GAME_CONFIG & gameState zugreifen -->
    <script src="/js/socket-manager.js"></script>
    <script src="/js/races.js"></script>
    <script src="/js/race-selection.js"></script>
    <script src="/js/map-system.js"></script>
    <script src="/js/game-main.js"></script>

</body>
</html>